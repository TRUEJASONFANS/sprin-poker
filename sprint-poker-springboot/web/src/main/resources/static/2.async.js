(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2,13],{XDeP:function(e,t,r){"use strict";var o=r("LNUy"),a=r("qhJN");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r("E1fM")),s=a(r("pJh9")),c=a(r("bALw")),u=o(r("n7oB")),i={namespace:"pockerBoard",state:{scoreList:[],roomName:"",average:""},reducers:{syncStoryPoint(e,t){var r=t.payload.scoreList;return(0,s.default)({},e,{scoreList:r})},syncRoomName(e,t){var r=t.payload.roomName;return(0,s.default)({},e,{roomName:r})}},effects:{queryStoryPoints:n.default.mark(function e(t,r){var o,a;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.payload,a=r.call,e.next=4,a(u,o);case 4:case"end":return e.stop()}},e,this)}),onClickPocker:n.default.mark(function e(t,r){var o,a;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.payload,a=r.call,r.put,e.next=4,a(u.onClickPocker,o);case 4:case"end":return e.stop()}},e,this)}),addTicketRecord:n.default.mark(function e(t,r){var o,a;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=t.payload,a=r.call,e.next=4,a(u.addTikcetRecord(o));case 4:case"end":return e.stop()}},e,this)})},subscriptions:{init(e){var t=e.dispatch,r=e.history;return r.listen(e=>{var r=(0,c.default)("/pockerRoom/:id").exec(e.pathname);if(r){var o=e.pathname.substring(e.pathname.lastIndexOf("/")+1);t({type:"syncRoomName",payload:{roomName:o}}),u.fetch(e=>{console.log("pocker room",e),t({type:"syncStoryPoint",payload:{scoreList:JSON.parse(e.body)}})},o)}})}}};t.default=i},n7oB:function(e,t,r){"use strict";var o=r("LNUy");Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=s,t.onClickPocker=c,t.addTikcetRecord=u;var a=r("pJ0z"),n=o(r("t3Un"));function s(e,t){(0,a.subscribe)("/pocker/pockerBoard/"+t,e),(0,a.request)("/app/joinPockerBoard/"+t,{},{})}function c(e){console.log("xxxx",e.roomName),(0,a.request)("/app/onClickPocker/"+e.roomName,{},JSON.stringify(e))}function u(e){console.log("tag",JSON.stringify(e)),n.request("/poker/ticketRecord",{method:"POST",body:JSON.stringify(e)})}},t3Un:function(e,t,r){"use strict";var o=r("qhJN");Object.defineProperty(t,"__esModule",{value:!0}),t.request=u;var a=o(r("E1fM")),n=o(r("BFkJ")),s=o(r("PkBI"));function c(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function u(e,t){return i.apply(this,arguments)}function i(){return i=(0,n.default)(a.default.mark(function e(t,r){var o,n,u;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log("url",t),console.log("options",r),e.next=4,(0,s.default)(t,r);case 4:return o=e.sent,console.log("response",o),c(o),e.next=9,o.json();case 9:return n=e.sent,u={data:n,headers:{}},o.headers.get("x-total-count")&&(u.headers["x-total-count"]=o.headers.get("x-total-count")),e.abrupt("return",u);case 13:case"end":return e.stop()}},e,this)})),i.apply(this,arguments)}}}]);